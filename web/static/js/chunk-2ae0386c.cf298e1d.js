(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ae0386c"],{"00ca":function(t,e,i){"use strict";i("ceaa")},"0bb4":function(t,e,i){"use strict";i.d(e,"d",(function(){return o})),i.d(e,"a",(function(){return r})),i.d(e,"e",(function(){return a})),i.d(e,"c",(function(){return u})),i.d(e,"b",(function(){return l}));var n=i("b775");function o(){return Object(n["a"])({url:"notice",method:"get"})}function r(t){return Object(n["a"])({url:"notice",method:"post",data:t})}function a(t){return Object(n["a"])({url:"notice",method:"put",data:t})}function u(t){return Object(n["a"])({url:"notice/".concat(t),method:"get"})}function l(t){return Object(n["a"])({url:"notice/".concat(t),method:"delete"})}},"0c25":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("notice-detail",{attrs:{"is-edit":!0}})},o=[],r=i("fd72"),a={name:"EditForm",components:{NoticeDetail:r["a"]}},u=a,l=i("2877"),s=Object(l["a"])(u,n,o,!1,null,null,null);e["default"]=s.exports},"16d8":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:t.id}})},o=[],r=i("5530"),a=(i("b680"),i("a7be"),i("44f8"),i("a6e0"),i("547e")),u=i.n(a),l={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},s={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return l}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},l,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new u.a(Object(r["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},c=s,d=i("2877"),f=Object(d["a"])(c,n,o,!1,null,null,null);e["a"]=f.exports},ceaa:function(t,e,i){},fd72:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"editor-container"},[i("el-form",{ref:"defaultform",staticClass:"form",attrs:{model:t.defaultform,"label-width":"80px",rules:t.rules}},[i("el-form-item",{attrs:{label:"公告名称",prop:"name"}},[i("el-input",{model:{value:t.defaultform.name,callback:function(e){t.$set(t.defaultform,"name",e)},expression:"defaultform.name"}})],1),i("el-form-item",{attrs:{label:"结束时间",prop:"toDate"}},[i("el-date-picker",{attrs:{align:"right",type:"date",placeholder:"选择日期","value-format":"timestamp","picker-options":t.pickerOptions},model:{value:t.defaultform.toDate,callback:function(e){t.$set(t.defaultform,"toDate",e)},expression:"defaultform.toDate"}})],1),i("el-form-item",{attrs:{label:"公告状态",prop:"status"}},[i("el-select",{model:{value:t.defaultform.status,callback:function(e){t.$set(t.defaultform,"status",e)},expression:"defaultform.status"}},t._l(t.statusOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{attrs:{label:"内容",prop:"content"}},[i("markdown-editor",{ref:"markdownEditor",attrs:{height:"300px"},model:{value:t.defaultform.content,callback:function(e){t.$set(t.defaultform,"content",e)},expression:"defaultform.content"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")])],1)],1)],1)])},o=[],r=(i("d3b7"),i("16d8")),a=i("0bb4"),u={name:{required:!0,trigger:"blur"},toDate:{required:!0,trigger:"blur"},status:{required:!0,trigger:"blur"},content:{required:!0,trigger:"blur"}},l={name:"noticeDetail",props:{isEdit:{type:Boolean,default:!1}},components:{MarkdownEditor:r["a"]},data:function(){return{rules:Object.assign({},u),defaultform:{name:"",toDate:"",status:1,content:""},statusOptions:[{value:1,label:"上线"},{value:0,label:"下线"}],pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()},shortcuts:[{text:"一周后",onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}},{text:"一个月",onClick:function(t){var e=new Date;e.setTime(e.getTime()+2592e6),t.$emit("pick",e)}},{text:"三个月",onClick:function(t){var e=new Date;e.setTime(e.getTime()+7776e6),t.$emit("pick",e)}},{text:"一年后",onClick:function(t){var e=new Date;e.setTime(e.getTime()+31104e6),t.$emit("pick",e)}}]}}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}},computed:{},methods:{onSubmit:function(){var t=this;console.log(this.defaultform),this.$refs.defaultform.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.defaultform.content=t.$refs.markdownEditor.getHtml(),t.loading=!0;var i=t.isEdit?Object(a["e"])(t.defaultform):Object(a["a"])(t.defaultform);i.then((function(e){t.$notify({title:"成功",message:"提交成功",type:"success",duration:2e3})})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))}))},fetchData:function(t){var e=this;Object(a["c"])(t).then((function(t){e.defaultform=t.obj}))}}},s=l,c=(i("00ca"),i("2877")),d=Object(c["a"])(s,n,o,!1,null,"49cc562e",null);e["a"]=d.exports}}]);